<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roblox åˆ†äº«é“¾æ¥è½¬æ¢å™¨ Â· ä¸€é”®æ‰“å¼€</title>
    <style>
        body { font-family: system-ui, sans-serif; background: #1e1e2f; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; padding: 16px; }
        .card { background: #2c2c3a; border-radius: 24px; padding: 32px; width: 100%; max-width: 550px; box-shadow: 0 20px 40px rgba(0,0,0,0.5); }
        h2 { color: white; margin-top: 0; margin-bottom: 20px; }
        label { color: #ccc; display: block; margin-bottom: 6px; }
        input { width: 100%; padding: 14px 18px; border-radius: 40px; border: 1px solid #444; background: #1a1a28; color: white; font-size: 1rem; outline: none; margin-bottom: 20px; box-sizing: border-box; }
        input:focus { border-color: #7b68ee; }
        .button-row {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }
        .button-row button {
            flex: 1;
            padding: 14px 0;
            border-radius: 40px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: 0.2s;
            border: none;
        }
        #convertBtn {
            background: #7b68ee;
            color: white;
            border: 1px solid #9b89ff;
        }
        #convertBtn:hover {
            background: #8b79ff;
            transform: translateY(-2px);
        }
        #openBtn {
            background: #3a3a5a;
            color: white;
            border: 1px solid #555;
        }
        #openBtn:hover {
            background: #4a4a70;
            transform: translateY(-2px);
        }
        #openBtn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }
        .result {
            background: #0f0f1a;
            border-radius: 20px;
            padding: 16px;
            color: #b0e0ff;
            word-break: break-all;
            border: 1px solid #3f3f60;
            font-family: monospace;
            user-select: all;
            margin-top: 20px;
        }
        .footer { margin-top: 20px; color: #888; font-size: 0.8rem; text-align: center; }
    </style>
</head>
<body>
    <div class="card">
        <h2>ğŸ® Roblox åˆ†äº«é“¾æ¥è½¬æ¢å™¨</h2>
        <label>ğŸ”— è¾“å…¥åˆ†äº«é“¾æ¥</label>
        <input type="url" id="inputUrl" placeholder="https://www.roblox.com/share?code=xxx&type=Server" value="https://www.roblox.com/share?code=f695799d7dab5d40af6a07cff27bc717&type=Server">

        <div class="button-row">
            <button id="convertBtn">ğŸ”„ è½¬æ¢å¹¶å¤åˆ¶</button>
            <button id="openBtn" disabled>âš¡ æ‰“å¼€æ¸¸æˆ</button>
        </div>

        <div class="result" id="result">ç‚¹å‡»è½¬æ¢ç”Ÿæˆé“¾æ¥</div>
        <div class="footer">
            ç”Ÿæˆæ ¼å¼ï¼šroblox://navigation/share_links?code=...&type=Server<br>
            âœ¨ åˆ¶ä½œäººï¼šèŠ±æ¸¯.
        </div>
    </div>

    <script>
        (function() {
            const inputUrl = document.getElementById('inputUrl');
            const convertBtn = document.getElementById('convertBtn');
            const openBtn = document.getElementById('openBtn');
            const resultDiv = document.getElementById('result');

            let currentRobloxLink = ''; // ä¿å­˜æœ€æ–°ç”Ÿæˆçš„é“¾æ¥

            // è½¬æ¢å‡½æ•°
            function convert() {
                const urlInput = inputUrl.value.trim();
                if (!urlInput) {
                    alert('è¯·è¾“å…¥é“¾æ¥');
                    return;
                }

                try {
                    const parsed = new URL(urlInput);
                    const code = parsed.searchParams.get('code');
                    if (!code) {
                        alert('é“¾æ¥ä¸­æ²¡æœ‰æ‰¾åˆ° code å‚æ•°');
                        return;
                    }
                    const type = parsed.searchParams.get('type') || 'Server';

                    const robloxLink = `roblox://navigation/share_links?code=${encodeURIComponent(code)}&type=${encodeURIComponent(type)}`;
                    resultDiv.innerText = robloxLink;
                    currentRobloxLink = robloxLink;

                    // å¯ç”¨æ‰“å¼€æŒ‰é’®
                    openBtn.disabled = false;

                    // å¤åˆ¶åˆ°å‰ªè´´æ¿
                    navigator.clipboard.writeText(robloxLink).then(() => {
                        convertBtn.innerText = 'âœ… å·²å¤åˆ¶';
                        setTimeout(() => convertBtn.innerText = 'ğŸ”„ è½¬æ¢å¹¶å¤åˆ¶', 1500);
                    }).catch(() => {
                        alert('å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶');
                    });
                } catch (e) {
                    alert('æ— æ•ˆçš„ URL');
                }
            }

            // æ‰“å¼€æ¸¸æˆ
            function openGame() {
                if (!currentRobloxLink) {
                    alert('è¯·å…ˆè½¬æ¢ç”Ÿæˆé“¾æ¥');
                    return;
                }
                // å°è¯•æ‰“å¼€ roblox åè®®
                window.location.href = currentRobloxLink;
                // æ³¨æ„ï¼šæµè§ˆå™¨å¯èƒ½ä¼šå¼¹å‡ºç¡®è®¤æ¡†ï¼Œè¿™æ˜¯æ­£å¸¸çš„
            }

            convertBtn.addEventListener('click', convert);
            openBtn.addEventListener('click', openGame);

            // å¯é€‰ï¼šè¾“å…¥æ¡†å›è½¦ç›´æ¥è½¬æ¢
            inputUrl.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') {
                    convert();
                }
            });
        })();
    </script>
</body>
</html>